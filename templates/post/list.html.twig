{% extends 'base.html.twig' %}

{% block title %}Liste des posts{% endblock %}

{% block body %}
    <h1>Liste des posts</h1>

    <a href="{{ path('app_post_create') }}" class="btn btn-primary mb-3">Créer un nouveau post</a>

    <ul>
        {% for post in posts %}
            <li>
                <a href="{{ path('app_post_view', {'id': post.id}) }}">{{ post.contenu }}</a>
                {% if is_granted('edit', post) %}
                    <a href="{{ path('app_post_edit', {'id': post.id}) }}">Modifier</a>
                {% endif %}
                {% if is_granted('delete', post) %}
                    <a href="{{ path('app_post_delete', {'id': post.id}) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce post ?');">Supprimer</a>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endblock %}
